<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Memory game</title>
</head>

<body>
  <div class="game-container">
    <script>
      function Game(selector) {
        this.container = selector ? document.querySelector(selector) : document.querySelector('body')
        this.gameBoard = null
        this.scoreContainer = null

        this.deckOfCards = [
          {
            front: "A",
            visible: true,
            complete: false
          },
          {
            front: "A",
            visible: true,
            complete: false
          },
          {
            front: "B",
            visible: false,
            complete: false
          },
          {
            front: "B",
            visible: false,
            complete: false
          }
        ]

        this.numberOfCardsOnBoardSide = Math.sqrt(this.deckOfCards.length)
        this.cardDimension = (100 / this.numberOfCardsOnBoardSide) + '%'

        this.init()
      }

      Game.prototype.init = function () {
        this.makeGameBoard()
        this.render()
      }

      Game.prototype.makeGameBoard = function () {
        const board = document.createElement('div')
        board.style.width = '70vh'
        board.style.height = '70vh'
        board.style.backgroundColor = 'yellow'
        board.style.display = 'flex'
        board.style.flexWrap = 'wrap'
        board.style.justifyContent = 'center'

        board.className = 'game-board'

        this.container.appendChild(board)
        this.gameBoard = board
      }

      Game.prototype.render = function () {
        this.gameBoard.innerHTML = ''

        this.deckOfCards.forEach((card, index) => {
          this.renderSingleCard(card, index)
        })
      }

      Game.prototype.renderSingleCard = function (card, index) {
        const cardElement = document.createElement('div')
        cardElement.style.width = this.cardDimension
        cardElement.style.height = this.cardDimension
        cardElement.style.backgroundColor = 'red'

        if (card.visible) {
          cardElement.innerText = card.front
        }

        if (card.complete) {
          cardElement.innerText = card.front + 'competed'
        }

        cardElement.addEventListener(
          'click',
          () => this.toggleCard(index)
        )

        this.gameBoard.appendChild(cardElement)
      }

      Game.prototype.toggleCard = function (index) {
        this.deckOfCards[index].visible = true

        this.render()
      }

      const newGame = new Game('body')
    </script>
  </div>
  <!-- <script src="game.js"></script> -->
</body>

</html>